{% extends 'basegroupe.html.twig' %}

{% block cc %}
    {% block body %}
        <h1></h1>

        <style>
            /* CSS for card styling */
            .card {
                width: 18rem;
                border: 1px solid #ccc;
                border-radius: 10px;
                overflow: hidden;
                transition: transform 0.3s ease;
            }

            .card:hover {
                transform: translateY(-5px);
            }

            .card .card-body {
                padding: 1.25rem;
            }

            .card .card-title {
                font-size: 1.25rem;
                margin-bottom: 0.75rem;
            }

            .card .card-text {
                font-size: 1rem;
                color: #6c757d;
            }

            .card-footer {
                background-color: #f8f9fa;
                padding: 0.75rem 1.25rem;
                border-top: 1px solid #ccc;
                border-radius: 0 0 10px 10px;
            }

            .card-footer a {
                margin-right: 0.5rem;
            }

            .heart {
                cursor: pointer;
            }

            .heart-label {
                margin-left: 0.25rem;
            }
        </style>

        <div class="row">
            {% for groupe in groupes %}
                <div class="col-md-4 mb-4">
                    <div class="card position-relative">
                        <div style="max-height: 200px; overflow: hidden;">
                            <img src="{{ asset('uploads/images/' ~ groupe.image) }}" class="card-img-top" alt="Image" style="object-fit: cover; width: 100%; height: 100%;">
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">{{ groupe.nom }}</h5>
                            <p class="card-text">{{ groupe.description }}</p>
                        </div>
                        <div class="card-footer mt-auto">
                            <a href="{{ path('app_groupe_show', {'id': groupe.id}) }}" class="btn btn-primary">Show</a>
                            <a href="{{ path('app_groupe_edit', {'id': groupe.id}) }}" class="btn btn-secondary">Edit</a>
                            <a href="{{ path('app_post_new', {'groupId': groupe.id}) }}" class="heart">Join </a>
                        </div>
                    </div>
                </div>
            {% else %}
                <p>No groups found.</p>
            {% endfor %}
        </div>

        <a href="{{ path('app_groupe_new') }}" class="btn btn-success">Create new</a>

        <script>
            // JavaScript to adjust card heights to be the same
            document.addEventListener("DOMContentLoaded", function() {
                const cards = document.querySelectorAll('.card');
                let maxHeight = 0;

                cards.forEach(function(card) {
                    if (card.offsetHeight > maxHeight) {
                        maxHeight = card.offsetHeight;
                    }
                });

                cards.forEach(function(card) {
                    card.style.height = maxHeight + 'px';
                });
            });
        </script>
    {% endblock %}
{% endblock %}
